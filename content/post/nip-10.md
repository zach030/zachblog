+++
author = "zach zhou"
title = "详解nostr：nip-10"
date = "2023-02-28"
description = "web3"
tags = [
    "web3"
]
+++
# NIP-10

## 文本事件中的`e`和`p`标签

### 摘要

这个 NIP 描述了如何在文本事件中使用“ e”和“ p”标记，特别是那些对其他文本事件的响应。它帮助客户端将答复线程化到以原始事件为根的树状结构中。

### `"e"`标签

`["e", <event-id>, <relay-url>, <marker>]`
- `<event-id>`是事件被引用的ID
- `<relay-url>`是与引用的事件关联的中继器，客户端应该添加一个`<relay-url>`选项，但是默认应该为""
- `<marker>`是可选项，如果出现应该是`"reply"`, `"root"`, or `"mention"`其中之一

"e"标签的内容顺序没有特定关系，被标记为`"reply"`指的是回复的事件。被标记为`"root"`的指向的是被回复的根事件。对于最顶层的事件，只应该标记`"root"`。被标记为`"mention"`指的是被引用或转发的事件ID。

直接回复根事件的应该只有一个`"e"`标签，类型为`"root"`

> 这个方案是首选的，因为它允许事件提到其他事件，而不会将它们与 < response-id > 或 < root-id > 混淆。

### `"p"`标签

在文本事件中使用的命令包含用于记录所涉及的用户的 pubkey 列表。

当回复一个文本事件 E 时，回复事件的“ p”标签应该包含 E 的所有“ p”标签以及被回复事件的“ pubkey”。

示例: 给定一个由 a1创建的带有“ p”标记`[ p1，p2，p3]`的文本事件，那么回复的“ p”标记应该是`[ a1，p1，p2，p3]` ，没有特定的顺序。